---
title: "Introduction to ArchaeoCal"
author: "N. Frerebeau"
date: "`r Sys.Date()`"
output:
  markdown::html_format:
    options:
      toc: true
      number_sections: true
bibliography: bibliography.bib
vignette: >
  %\VignetteIndexEntry{Introduction to ArchaeoCal}
  %\VignetteEngine{knitr::knitr}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "./figures/",
  fig.align = "center",
  fig.width = 7,
  out.width = NULL
)
```

This vignette uses data available through the [**ArchaeoData**](https://github.com/ArchaeoStat/ArchaeoData) package which is available in a [separate repository](https://archaeostat.r-universe.dev).
**ArchaeoData** provides OxCal (Bronk Ramsey, 2009) input models.

```{r ArchaeoData, eval=FALSE}
## Install the latest version
install.packages("ArchaeoData", repos = "https://archaeostat.r-universe.dev")
```

```{r setup}
## Load package
library(ArchaeoCal)

## Download OxCal
oxcal_configure(ask = FALSE)
```

```{r excute}
## Construct path to file
path <- file.path("oxcal", "ksarakil", "ksarakil.oxcal")
file <- system.file(path, package = "ArchaeoData")

## Read OxCal script from Bosch et al. 2015
scr <- readLines(file)

## Print script
# cat(scr, sep = "\n")

## Execute OxCal script
## /!\ this may take a while /!\
out <- oxcal_execute(scr)

## Parse OxCal output
res <- oxcal_parse(out)
```

## References

Bronk Ramsey, C. (2009). Bayesian Analysis of Radiocarbon Dates. *Radiocarbon*, 51(1): 337-360. DOI: [10.1017/S0033822200033865(https://doi.org/10.1017/S0033822200033865).
